(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aec67894"],{"18d4":function(t,e,i){"use strict";i("a2d3")},"7a4f":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("blog-top"),i("div",{staticClass:"page-container"},[i("div",{staticClass:"section"},[i("div",{staticClass:"page"},[i("div",{staticClass:"detail",attrs:{"data-aos":"fade-up"}},[i("div",{staticStyle:{"padding-bottom":"15px"}},[i("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(e){return t.$router.go(-1)}}},[i("i",{staticClass:"el-icon-s-fold"}),t._v("\n                            返回上一级\n                        ")])],1),i("div",{staticClass:"detail-header"},[i("h1",{staticClass:"detail-title"},[t._v(t._s(t.article.title))]),i("div",{staticClass:"detail-info"},[i("i",{staticClass:"iconfont icon-dianji"}),i("span",{attrs:{id:"click_count_text"}},[t._v(t._s(t.article.visit_count)+" 次")]),i("a",{on:{click:function(e){return t.myScrollIntoView(".explain")}}},[i("i",{staticClass:"el-icon-chat-dot-round"}),i("span",{attrs:{id:"comment_count_text"}},[t._v(t._s(t.article.comment_count)+" 条")])]),i("a",{on:{click:function(e){return t.clickLike(t.article)}}},[i("i",{staticClass:"iconfont icon-dianzan",class:{"c-red":t.likes[t.article.type+"-"+t.article.id]}}),i("span",{staticClass:"like_count_text"},[t._v(t._s(t.article.like_count))])]),i("i",{staticClass:"el-icon-date"}),i("span",[t._v(t._s(t.article.create_time))])])]),i("div",{directives:[{name:"highlight",rawName:"v-highlight"}],staticClass:"detail-body"},[i("p",{domProps:{innerHTML:t._s(t.article.content)}})]),i("div",{staticClass:"explain"},[t._v("\n                        温馨提示：本博客所有内容仅供学习，不允许商用，如有侵权，请联系博主删除，谢谢。\n                    ")]),i("el-divider",{attrs:{"content-position":"left"}},[t._v("分享快乐")]),i("div",{staticClass:"share",attrs:{id:"share","data-aos":"fade-right"}},[i("ul",[i("li",{staticClass:"f-praise",on:{click:function(e){return t.clickLike(t.article)}}},[t._m(0)]),i("li",{staticClass:"f-weinxi",on:{click:function(e){return t.clickShare("wechat")}}},[i("a",{staticClass:"s-weinxi",attrs:{"data-cmd":"weixin"}})]),i("li",{staticClass:"f-sina",on:{click:function(e){return t.clickShare("sina")}}},[i("a",{staticClass:"s-sina",attrs:{"data-cmd":"tsina"}})]),i("li",{staticClass:"f-qq",on:{click:function(e){return t.clickShare("qq")}}},[i("i",{staticClass:"iconfont icon-qq1"})]),i("li",{staticClass:"f-qzone",on:{click:function(e){return t.clickShare("qzone")}}},[i("a",{staticClass:"s-qzone",attrs:{"data-cmd":"qzone"}})])])]),i("ul",{staticClass:"recommentd",attrs:{"V-if":"moreArticle"}},[i("li",[t._m(1),i("div",[i("span",[t._v("Last")]),i("p",[t.moreArticle[0]?i("router-link",{attrs:{to:{name:"detail",params:{id:t.moreArticle[0].id}}}},[t._v("\n                                        "+t._s(t.moreArticle[0].title)+"\n                                    ")]):i("span",[t._v("没有更多了")])],1)])]),i("li",[i("div",[i("span",[t._v("Next")]),i("p",[t.moreArticle[1]?i("router-link",{attrs:{to:{name:"detail",params:{id:t.moreArticle[1].id}}}},[t._v("\n                                        "+t._s(t.moreArticle[1].title)+"\n                                    ")]):i("span",[t._v("没有更多了")])],1)]),t._m(2)])]),i("el-divider",{attrs:{"content-position":"left"}},[t._v("发表评论")]),i("div",{staticClass:"comment",attrs:{id:"comment"}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:20},placeholder:"说点什么吧~",resize:"none",maxlength:"50","show-word-limit":""},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),i("el-button",{staticClass:"submit",attrs:{type:"success",size:"small"},on:{click:t.submit}},[t._v("提交")]),i("vue-emoji",{on:{select:t.selectEmoji}}),i("comment-board",{attrs:{data:t.commentList,current:this.page.current,size:this.page.size,noMore:t.noMore},on:{loadData:t.loadComment,submit:t.submitComment}})],1)],1)])])])],1)},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",[i("a",{staticClass:"s-praise",attrs:{href:"javascript:void(0);"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("label",[i("i",{staticClass:"el-icon-back"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("label",[i("i",{staticClass:"el-icon-right"})])}],n=(i("8e6e"),i("456d"),i("ac6a"),i("ade3")),c=i("5c96"),o=i("2f62"),r=i("53d0"),l=i("16fb"),d=i("5e2f"),u=i("c54a"),m=i("89d1"),h=i("0e0b");function p(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function f(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?p(Object(i),!0).forEach((function(e){Object(n["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var v={name:"detail",data:function(){return{id:null,article:{},moreArticle:[],commentList:[],value:"",page:{current:1,size:10},noMore:!1}},components:{BlogTop:r["a"],CommentBoard:l["a"],vueEmoji:d["a"]},computed:f({},Object(o["b"])(["website","likes"])),watch:{$route:function(t,e){t!=e&&this.init()}},mounted:function(){this.init()},methods:{init:function(){var t=this;if(this.id=this.$route.params.id,this.id){var e=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Object(m["f"])(this.id).then((function(i){t.article=i.data.data,e.close()})).then((function(){Object(m["d"])(t.id,t.article.type).then((function(e){t.moreArticle=e.data.data}))})).then((function(){t.loadComment(t.page)})).catch((function(t){console.log(t),e.close()}))}else c["MessageBox"].confirm("加载文章失败,请返回首页重试!","返回首页",{confirmButtonText:"返回首页",type:"warning",showClose:!1,showCancelButton:!1,closeOnPressEscape:!1}).then((function(){t.$router.push({path:t.website.homePage})}))},loadComment:function(t){var e=this;Object(m["h"])(Object.assign(t,{type:this.article.type,objectId:this.id})).then((function(t){var i=t.data.data;i&&i.records&&i.records.length>0?(e.commentList=e.commentList.concat(i.records),e.page.current=i.current):setTimeout((function(){e.noMore=!0}),2e3)}))},clickLike:function(t){var e=this;Object(u["a"])(this.$store.getters.readerAccessToken)?this.$message({message:"还未登录哦，请先登录再试试吧!",type:"warning"}):Object(m["c"])({objectId:t.id,type:t.type}).then((function(i){t.like_count=i.data.data,e.likes[t.type+"-"+t.id]?e.$message({message:"取消点赞成功!",type:"success"}):e.$message({message:"点赞成功!",type:"success"}),e.likes[t.type+"-"+t.id]=!e.likes[t.type+"-"+t.id],e.$store.dispatch("updateLikes",e.likes)}))},clickShare:function(t){if("wechat"==t){var e="https://cli.im/api/qrcode/code?text="+encodeURIComponent(window.location.href),i="分享到微信";Object(h["f"])(e,i,540,540)}else if("sina"==t){var a={url:window.location.href,type:"3",count:"1",appkey:"",title:this.article.title,pic:this.article.cover_src,ralateUid:"",rnd:(new Date).valueOf()},s=[];for(var n in a)s.push(n+"="+encodeURIComponent(a[n]||""));var c="http://service.weibo.com/share/share.php?"+s.join("&"),o="分享到新浪";Object(h["f"])(c,o,540,540)}else if("qq"==t){var r={url:window.location.href,desc:this.article.introduction,title:this.article.title,summary:this.article.introduction,pics:this.article.cover_src,flash:"",site:this.website.title},l=[];for(var d in r)l.push(d+"="+encodeURIComponent(r[d]||""));var u="http://connect.qq.com/widget/shareqq/iframe_index.html?"+l.join("&"),m="分享到qq好友";Object(h["f"])(u,m,740,540)}else if("qzone"==t){var p={url:window.location.href,showcount:"1",desc:this.article.introduction,summary:this.article.introduction,title:this.article.title,site:this.website.title,pics:this.article.cover_src,style:"101",width:199,height:30},f=[];for(var v in p)f.push(v+"="+encodeURIComponent(p[v]||""));var b="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?"+f.join("&"),g="分享到qq空间";Object(h["f"])(b,g,600,540)}},submitComment:function(t){var e=this;if(Object(u["a"])(this.$store.getters.readerAccessToken))this.$message({message:"还未登录哦，请先登录再试试吧!",type:"warning"});else if(t.value){var i=t.obj,a={parentId:i.parentId?i.parentId:t.id,commentatorId:i.commentatorId,commentator:i.commentator,commentatorAvatar:i.commentatorAvatar,content:t.value,objectId:this.id,type:this.article.type};Object(m["b"])(a).then((function(t){var a=t.data.data;e.commentList.forEach((function(t){(i.parentId&&i.parentId==t.id||!i.parentId&&i.id==t.id)&&(t.children&&0!=t.children.length||(t.children=[]),t.children.push(a))}))}))}else this.$message({message:"回复内容不能为空呦!",type:"warning"})},selectEmoji:function(t){this.value+=t},submit:function(){var t=this;Object(u["a"])(this.$store.getters.readerAccessToken)?this.$message({message:"还未登录哦，请先登录再试试吧!",type:"warning"}):this.value?Object(m["b"])({content:this.value,type:this.article.type,objectId:this.id}).then((function(e){var i=e.data.data,a=[];a.push(i),t.commentList=a.concat(t.commentList),t.value=""})):this.$message({message:"评论内容不能为空呦!",type:"warning"})},myScrollIntoView:function(t){document.querySelector(t).scrollIntoView({behavior:"smooth"})}}},b=v,g=(i("18d4"),i("2877")),_=Object(g["a"])(b,a,s,!1,null,"78a4b7fd",null);e["default"]=_.exports},a2d3:function(t,e,i){}}]);