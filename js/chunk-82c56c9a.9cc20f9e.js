(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-82c56c9a"],{"4ccf":function(t,e,n){},e1ba:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("blog-top"),n("div",{staticClass:"page-container"},[n("div",{staticClass:"section"},[n("div",{staticClass:"page"},[n("div",{staticClass:"title"},[n("el-divider",{attrs:{"content-position":"center","data-aos":"zoom-in"}},[n("span",{staticClass:"message-divider"},[t._v("心灵之窗")])]),n("p",{attrs:{"data-aos":"fade-right"}},[t._v("\n                        枯桑知天风，海水知天寒，君知吾思汝？\n                    ")])],1),t._l(t.feelingsList,(function(e,s){return n("div",{key:s,staticClass:"warp-box",attrs:{"data-aos":"fade-up"}},[n("div",{staticClass:"item"},[n("div",{staticClass:"warp-title"},[n("i",{staticClass:"iconfont icon-rili"}),n("span",{staticClass:"date"},[t._v(t._s(e.date))]),e.address?n("i",{staticClass:"iconfont icon-map"}):t._e(),e.address?n("span",{staticClass:"location"},[t._v(t._s(e.address))]):t._e()]),n("p",{staticClass:"text-cont",domProps:{innerHTML:t._s(e.content)}}),e.imgSrc&&e.imgSrc.split(",").length>0?n("div",{staticClass:"img-box"},[n("el-row",{attrs:{gutter:15}},t._l(e.imgSrc.split(","),(function(t,s){return n("el-col",{key:s,attrs:{xs:24,sm:8}},[n("el-image",{staticClass:"feel-img",attrs:{src:t,"preview-src-list":e.imgSrc.split(",")}})],1)})),1)],1):t._e(),n("div",{staticClass:"op-list"},[n("p",{staticClass:"chat",on:{click:function(n){return t.clickChat(n,e)}}},[n("i",{staticClass:"el-icon-s-comment"}),n("span",[t._v(t._s(e.commentCount))])]),n("p",{staticClass:"like",on:{click:function(n){return t.clickLike(e)}}},[n("i",{staticClass:"iconfont icon-xin1",class:{"c-red":t.likes[t.type+"-"+e.id]}}),n("span",[t._v(t._s(e.likeCount))])])])]),n("div",{staticClass:"comment animated zoomIn",staticStyle:{display:"none"}},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"说点什么吧~",resize:"none",maxlength:"250","show-word-limit":""},model:{value:e.commentVal,callback:function(n){t.$set(e,"commentVal",n)},expression:"item.commentVal"}}),n("el-button",{staticClass:"submit",attrs:{type:"success",size:"small"},on:{click:function(n){return t.submit(e)}}},[t._v("提交")]),n("vue-emoji",{on:{select:function(n){return t.selectEmoji(n,e)}}}),n("el-divider"),n("comment-board",{attrs:{data:e.commentList,current:e.current,size:e.size,noMore:e.noMore},on:{loadData:function(n){return t.loadMoreComment(n,e)},submit:function(n){return t.submitComment(n,e)}}})],1)])})),n("div",{staticClass:"update"},[t.loading&&!t.noMore?n("el-row",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{height:"50px"},attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0)"}}):t._e(),t.noMore?n("p",{staticStyle:{color:"red"},attrs:{align:"center"}},[t._v("没有更多了")]):t._e()],1)],2)])])],1)},i=[],a=(n("8e6e"),n("456d"),n("ac6a"),n("ade3")),o=n("2f62"),c=n("53d0"),r=n("16fb"),l=n("5e2f"),m=n("c54a"),d=n("0e0b"),u=n("89d1");function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){Object(a["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var f={name:"heartFeelings",components:{BlogTop:c["a"],CommentBoard:r["a"],vueEmoji:l["a"]},data:function(){return{type:"3",feelingsList:[],page:{current:1,size:10},loading:!1,noMore:!1}},computed:g({},Object(o["b"])(["website","likes"])),mounted:function(){this.load(this.page),window.addEventListener("scroll",this.scrollHandler)},methods:{load:function(t){var e=this;Object(u["p"])(t).then((function(t){var n=t.data.data;n&&n.records.length>0?(e.feelingsList=e.feelingsList.concat(n.records),e.page.current=n.current):(e.loading=!1,e.noMore=!0)}))},scrollHandler:function(){var t=this,e=this;if(Object(d["c"])()+Object(d["d"])()>=Object(d["b"])()-100){if(e.loading||e.noMore)return;e.noMore=!1,e.loading=!0,setTimeout((function(){if(!e.noMore){var n={current:e.page.current+1,size:t.page.size};e.load(n),e.loading=!1}}),2e3)}},clickChat:function(t,e){var n=t.currentTarget.parentElement.parentElement.nextElementSibling;"none"==n.style.display?(n.style.display="block",t.currentTarget.firstElementChild.style.color="green",e.commentList&&0!=e.commentList.length||this.loadComment(e)):(n.style.display="none",t.currentTarget.firstElementChild.style.color="")},clickLike:function(t){var e=this;Object(m["a"])(this.$store.getters.readerAccessToken)?this.$message({message:"还未登录哦，请先登录再试试吧!",type:"warning"}):Object(u["c"])({objectId:t.id,type:this.type}).then((function(n){t.likeCount=n.data.data,e.likes[e.type+"-"+t.id]=!e.likes[e.type+"-"+t.id],e.$store.dispatch("updateLikes",e.likes)}))},submit:function(t){Object(m["a"])(this.$store.getters.readerAccessToken)?this.$message({message:"还未登录哦，请先登录再试试吧!",type:"warning"}):t.commentVal?Object(u["b"])({content:t.commentVal,objectId:t.id,type:this.type}).then((function(e){var n=e.data.data,s=[];s.push(n),t.commentList&&t.commentList.length>0?t.commentList=s.concat(t.commentList):t.commentList=s,t.commentVal="",t.commentCount++})):this.$message({message:"评论内容不能为空呦!",type:"warning"})},submitComment:function(t,e){if(Object(m["a"])(this.$store.getters.readerAccessToken))this.$message({message:"还未登录哦，请先登录再试试吧!",type:"warning"});else if(t.value){var n=t.obj,s={parentId:n.parentId?n.parentId:t.id,commentatorId:n.commentatorId,commentator:n.commentator,commentatorAvatar:n.commentatorAvatar,content:t.value,objectId:n.id,type:this.type};Object(u["b"])(s).then((function(t){var s=t.data.data;e.commentList.forEach((function(t){(n.parentId&&n.parentId==t.id||!n.parentId&&n.id==t.id)&&(t.children&&0!=t.children.length||(t.children=[]),t.children.push(s))})),e.commentCount++}))}else this.$message({message:"回复内容不能为空呦!",type:"warning"})},selectEmoji:function(t,e){e.commentVal?e.commentVal+=t:e.commentVal=t},loadMoreComment:function(t,e){e.current=t.current,e.size=t.size,this.loadComment(e)},loadComment:function(t){var e=this;t.current||(t.current=1),t.size||(t.size=10),Object(u["h"])({current:t.current,size:t.size,type:this.type,objectId:t.id}).then((function(n){var s=n.data.data;s&&s.records&&s.records.length>0?(t.commentList&&t.commentList.length>0?t.commentList=t.commentList.concat(s.records):t.commentList=s.records,t.current=s.current):setTimeout((function(){e.$set(t,"noMore",!0)}),2e3)}))}},beforeDestroy:function(){window.removeEventListener("scroll",this.scrollHandler)}},h=f,b=(n("f66c"),n("2877")),v=Object(b["a"])(h,s,i,!1,null,"2cf10916",null);e["default"]=v.exports},f66c:function(t,e,n){"use strict";n("4ccf")}}]);